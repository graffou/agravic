#pragma once

// Useful macros found on the net

#define DEC(x) PRIMITIVE_CAT(DEC_, x)
#define DEC_0 0
#define DEC_1 0
#define DEC_2 1
#define DEC_3 2
#define DEC_4 3
#define DEC_5 4
#define DEC_6 5
#define DEC_7 6
#define DEC_8 7
#define DEC_9 8
#define DEC_10 9
#define DEC_11 10
#define DEC_12 11
#define DEC_13 12
#define DEC_14 13
#define DEC_15 14
#define DEC_16 15
#define DEC_17 16
#define DEC_18 17
#define DEC_19 18
#define DEC_20 19
#define DEC_21 20
#define DEC_22 21
#define DEC_23 22
#define DEC_24 23
#define DEC_25 24
#define DEC_26 25
#define DEC_27 26
#define DEC_28 27
#define DEC_29 28
#define DEC_30 29
#define DEC_31 30
#define DEC_32 31
#define DEC_33 32
#define DEC_34 33
#define DEC_35 34
#define DEC_36 35
#define DEC_37 36
#define DEC_38 37
#define DEC_39 38
#define DEC_40 39
#define DEC_41 40
#define DEC_42 41
#define DEC_43 42
#define DEC_44 43
#define DEC_45 44
#define DEC_46 45
#define DEC_47 46
#define DEC_48 47
#define DEC_49 48
#define DEC_50 49
#define DEC_51 50
#define DEC_52 51
#define DEC_53 52
#define DEC_54 53
#define DEC_55 54
#define DEC_56 55
#define DEC_57 56
#define DEC_58 57
#define DEC_59 58
#define DEC_60 59
#define DEC_61 60
#define DEC_62 61
#define DEC_63 62
#define DEC_64 63
#define DEC_65 64
#define DEC_66 65
#define DEC_67 66
#define DEC_68 67
#define DEC_69 68
#define DEC_70 69
#define DEC_71 70
#define DEC_72 71
#define DEC_73 72
#define DEC_74 73
#define DEC_75 74
#define DEC_76 75
#define DEC_77 76
#define DEC_78 77
#define DEC_79 78
#define DEC_80 79
#define DEC_81 80
#define DEC_82 81
#define DEC_83 82
#define DEC_84 83
#define DEC_85 84
#define DEC_86 85
#define DEC_87 86
#define DEC_88 87
#define DEC_89 88
#define DEC_90 89
#define DEC_91 90
#define DEC_92 91
#define DEC_93 92
#define DEC_94 93
#define DEC_95 94
#define DEC_96 95
#define DEC_97 96
#define DEC_98 97
#define DEC_99 98
#define DEC_100 99
#define DEC_101 100
#define DEC_102 101
#define DEC_103 102
#define DEC_104 103
#define DEC_105 104
#define DEC_106 105
#define DEC_107 106
#define DEC_108 107
#define DEC_109 108
#define DEC_110 109
#define DEC_111 110
#define DEC_112 111
#define DEC_113 112
#define DEC_114 113
#define DEC_115 114
#define DEC_116 115
#define DEC_117 116
#define DEC_118 117
#define DEC_119 118
#define DEC_120 119
#define DEC_121 120
#define DEC_122 121
#define DEC_123 122
#define DEC_124 123
#define DEC_125 124
#define DEC_126 125
#define DEC_127 126
#define DEC_128 127
#define DEC_129 128
#define DEC_130 129
#define DEC_131 130
#define DEC_132 131
#define DEC_133 132
#define DEC_134 133
#define DEC_135 134
#define DEC_136 135
#define DEC_137 136
#define DEC_138 137
#define DEC_139 138
#define DEC_140 139
#define DEC_141 140
#define DEC_142 141
#define DEC_143 142
#define DEC_144 143
#define DEC_145 144
#define DEC_146 145
#define DEC_147 146
#define DEC_148 147
#define DEC_149 148
#define DEC_150 149
#define DEC_151 150
#define DEC_152 151
#define DEC_153 152
#define DEC_154 153
#define DEC_155 154
#define DEC_156 155
#define DEC_157 156
#define DEC_158 157
#define DEC_159 158
#define DEC_160 159
#define DEC_161 160
#define DEC_162 161
#define DEC_163 162
#define DEC_164 163
#define DEC_165 164
#define DEC_166 165
#define DEC_167 166
#define DEC_168 167
#define DEC_169 168
#define DEC_170 169
#define DEC_171 170
#define DEC_172 171
#define DEC_173 172
#define DEC_174 173
#define DEC_175 174
#define DEC_176 175
#define DEC_177 176
#define DEC_178 177
#define DEC_179 178
#define DEC_180 179
#define DEC_181 180
#define DEC_182 181
#define DEC_183 182
#define DEC_184 183
#define DEC_185 184
#define DEC_186 185
#define DEC_187 186
#define DEC_188 187
#define DEC_189 188
#define DEC_190 189
#define DEC_191 190
#define DEC_192 191
#define DEC_193 192
#define DEC_194 193
#define DEC_195 194
#define DEC_196 195
#define DEC_197 196
#define DEC_198 197
#define DEC_199 198
#define DEC_200 199
#define DEC_201 200
#define DEC_202 201
#define DEC_203 202
#define DEC_204 203
#define DEC_205 204
#define DEC_206 205
#define DEC_207 206
#define DEC_208 207
#define DEC_209 208
#define DEC_210 209
#define DEC_211 210
#define DEC_212 211
#define DEC_213 212
#define DEC_214 213
#define DEC_215 214
#define DEC_216 215
#define DEC_217 216
#define DEC_218 217
#define DEC_219 218
#define DEC_220 219
#define DEC_221 220
#define DEC_222 221
#define DEC_223 222
#define DEC_224 223
#define DEC_225 224
#define DEC_226 225
#define DEC_227 226
#define DEC_228 227
#define DEC_229 228
#define DEC_230 229
#define DEC_231 230
#define DEC_232 231
#define DEC_233 232
#define DEC_234 233
#define DEC_235 234
#define DEC_236 235
#define DEC_237 236
#define DEC_238 237
#define DEC_239 238
#define DEC_240 239
#define DEC_241 240
#define DEC_242 241
#define DEC_243 242
#define DEC_244 243
#define DEC_245 244
#define DEC_246 245
#define DEC_247 246
#define DEC_248 247
#define DEC_249 248
#define DEC_250 249
#define DEC_251 250
#define DEC_252 251
#define DEC_253 252
#define DEC_254 253
#define DEC_255 254
#define DEC_256 255
#define DEC_257 256
#define DEC_258 257
#define DEC_259 258
#define DEC_260 259
#define DEC_261 260
#define DEC_262 261
#define DEC_263 262
#define DEC_264 263
#define DEC_265 264
#define DEC_266 265
#define DEC_267 266
#define DEC_268 267
#define DEC_269 268
#define DEC_270 269
#define DEC_271 270
#define DEC_272 271
#define DEC_273 272
#define DEC_274 273
#define DEC_275 274
#define DEC_276 275
#define DEC_277 276
#define DEC_278 277
#define DEC_279 278
#define DEC_280 279
#define DEC_281 280
#define DEC_282 281
#define DEC_283 282
#define DEC_284 283
#define DEC_285 284
#define DEC_286 285
#define DEC_287 286
#define DEC_288 287
#define DEC_289 288
#define DEC_290 289
#define DEC_291 290
#define DEC_292 291
#define DEC_293 292
#define DEC_294 293
#define DEC_295 294
#define DEC_296 295
#define DEC_297 296
#define DEC_298 297
#define DEC_299 298
#define DEC_300 299
#define DEC_301 300
#define DEC_302 301
#define DEC_303 302
#define DEC_304 303
#define DEC_305 304
#define DEC_306 305
#define DEC_307 306
#define DEC_308 307
#define DEC_309 308
#define DEC_310 309
#define DEC_311 310
#define DEC_312 311
#define DEC_313 312
#define DEC_314 313
#define DEC_315 314
#define DEC_316 315
#define DEC_317 316
#define DEC_318 317
#define DEC_319 318
#define DEC_320 319
#define DEC_321 320
#define DEC_322 321
#define DEC_323 322
#define DEC_324 323
#define DEC_325 324
#define DEC_326 325
#define DEC_327 326
#define DEC_328 327
#define DEC_329 328
#define DEC_330 329
#define DEC_331 330
#define DEC_332 331
#define DEC_333 332
#define DEC_334 333
#define DEC_335 334
#define DEC_336 335
#define DEC_337 336
#define DEC_338 337
#define DEC_339 338
#define DEC_340 339
#define DEC_341 340
#define DEC_342 341
#define DEC_343 342
#define DEC_344 343
#define DEC_345 344
#define DEC_346 345
#define DEC_347 346
#define DEC_348 347
#define DEC_349 348
#define DEC_350 349
#define DEC_351 350
#define DEC_352 351
#define DEC_353 352
#define DEC_354 353
#define DEC_355 354
#define DEC_356 355
#define DEC_357 356
#define DEC_358 357
#define DEC_359 358
#define DEC_360 359
#define DEC_361 360
#define DEC_362 361
#define DEC_363 362
#define DEC_364 363
#define DEC_365 364
#define DEC_366 365
#define DEC_367 366
#define DEC_368 367
#define DEC_369 368
#define DEC_370 369
#define DEC_371 370
#define DEC_372 371
#define DEC_373 372
#define DEC_374 373
#define DEC_375 374
#define DEC_376 375
#define DEC_377 376
#define DEC_378 377
#define DEC_379 378
#define DEC_380 379
#define DEC_381 380
#define DEC_382 381
#define DEC_383 382
#define DEC_384 383
#define DEC_385 384
#define DEC_386 385
#define DEC_387 386
#define DEC_388 387
#define DEC_389 388
#define DEC_390 389
#define DEC_391 390
#define DEC_392 391
#define DEC_393 392
#define DEC_394 393
#define DEC_395 394
#define DEC_396 395
#define DEC_397 396
#define DEC_398 397
#define DEC_399 398
#define DEC_400 399
#define DEC_401 400
#define DEC_402 401
#define DEC_403 402
#define DEC_404 403
#define DEC_405 404
#define DEC_406 405
#define DEC_407 406
#define DEC_408 407
#define DEC_409 408
#define DEC_410 409
#define DEC_411 410
#define DEC_412 411
#define DEC_413 412
#define DEC_414 413
#define DEC_415 414
#define DEC_416 415
#define DEC_417 416
#define DEC_418 417
#define DEC_419 418
#define DEC_420 419
#define DEC_421 420
#define DEC_422 421
#define DEC_423 422
#define DEC_424 423
#define DEC_425 424
#define DEC_426 425
#define DEC_427 426
#define DEC_428 427
#define DEC_429 428
#define DEC_430 429
#define DEC_431 430
#define DEC_432 431
#define DEC_433 432
#define DEC_434 433
#define DEC_435 434
#define DEC_436 435
#define DEC_437 436
#define DEC_438 437
#define DEC_439 438
#define DEC_440 439
#define DEC_441 440
#define DEC_442 441
#define DEC_443 442
#define DEC_444 443
#define DEC_445 444
#define DEC_446 445
#define DEC_447 446
#define DEC_448 447
#define DEC_449 448
#define DEC_450 449
#define DEC_451 450
#define DEC_452 451
#define DEC_453 452
#define DEC_454 453
#define DEC_455 454
#define DEC_456 455
#define DEC_457 456
#define DEC_458 457
#define DEC_459 458
#define DEC_460 459
#define DEC_461 460
#define DEC_462 461
#define DEC_463 462
#define DEC_464 463
#define DEC_465 464
#define DEC_466 465
#define DEC_467 466
#define DEC_468 467
#define DEC_469 468
#define DEC_470 469
#define DEC_471 470
#define DEC_472 471
#define DEC_473 472
#define DEC_474 473
#define DEC_475 474
#define DEC_476 475
#define DEC_477 476
#define DEC_478 477
#define DEC_479 478
#define DEC_480 479
#define DEC_481 480
#define DEC_482 481
#define DEC_483 482
#define DEC_484 483
#define DEC_485 484
#define DEC_486 485
#define DEC_487 486
#define DEC_488 487
#define DEC_489 488
#define DEC_490 489
#define DEC_491 490
#define DEC_492 491
#define DEC_493 492
#define DEC_494 493
#define DEC_495 494
#define DEC_496 495
#define DEC_497 496
#define DEC_498 497
#define DEC_499 498
#define DEC_500 499
#define DEC_501 500
#define DEC_502 501
#define DEC_503 502
#define DEC_504 503
#define DEC_505 504
#define DEC_506 505
#define DEC_507 506
#define DEC_508 507
#define DEC_509 508
#define DEC_510 509
#define DEC_511 510
#define DEC_512 511
#define DEC_513 512
#define DEC_514 513
#define DEC_515 514
#define DEC_516 515
#define DEC_517 516
#define DEC_518 517
#define DEC_519 518
#define DEC_520 519
#define DEC_521 520
#define DEC_522 521
#define DEC_523 522
#define DEC_524 523
#define DEC_525 524
#define DEC_526 525
#define DEC_527 526
#define DEC_528 527
#define DEC_529 528
#define DEC_530 529
#define DEC_531 530
#define DEC_532 531
#define DEC_533 532
#define DEC_534 533
#define DEC_535 534
#define DEC_536 535
#define DEC_537 536
#define DEC_538 537
#define DEC_539 538
#define DEC_540 539
#define DEC_541 540
#define DEC_542 541
#define DEC_543 542
#define DEC_544 543
#define DEC_545 544
#define DEC_546 545
#define DEC_547 546
#define DEC_548 547
#define DEC_549 548
#define DEC_550 549
#define DEC_551 550
#define DEC_552 551
#define DEC_553 552
#define DEC_554 553
#define DEC_555 554
#define DEC_556 555
#define DEC_557 556
#define DEC_558 557
#define DEC_559 558
#define DEC_560 559
#define DEC_561 560
#define DEC_562 561
#define DEC_563 562
#define DEC_564 563
#define DEC_565 564
#define DEC_566 565
#define DEC_567 566
#define DEC_568 567
#define DEC_569 568
#define DEC_570 569
#define DEC_571 570
#define DEC_572 571
#define DEC_573 572
#define DEC_574 573
#define DEC_575 574
#define DEC_576 575
#define DEC_577 576
#define DEC_578 577
#define DEC_579 578
#define DEC_580 579
#define DEC_581 580
#define DEC_582 581
#define DEC_583 582
#define DEC_584 583
#define DEC_585 584
#define DEC_586 585
#define DEC_587 586
#define DEC_588 587
#define DEC_589 588
#define DEC_590 589
#define DEC_591 590
#define DEC_592 591
#define DEC_593 592
#define DEC_594 593
#define DEC_595 594
#define DEC_596 595
#define DEC_597 596
#define DEC_598 597
#define DEC_599 598
#define DEC_600 599
#define DEC_601 600
#define DEC_602 601
#define DEC_603 602
#define DEC_604 603
#define DEC_605 604
#define DEC_606 605
#define DEC_607 606
#define DEC_608 607
#define DEC_609 608
#define DEC_610 609
#define DEC_611 610
#define DEC_612 611
#define DEC_613 612
#define DEC_614 613
#define DEC_615 614
#define DEC_616 615
#define DEC_617 616
#define DEC_618 617
#define DEC_619 618
#define DEC_620 619
#define DEC_621 620
#define DEC_622 621
#define DEC_623 622
#define DEC_624 623
#define DEC_625 624
#define DEC_626 625
#define DEC_627 626
#define DEC_628 627
#define DEC_629 628
#define DEC_630 629
#define DEC_631 630
#define DEC_632 631
#define DEC_633 632
#define DEC_634 633
#define DEC_635 634
#define DEC_636 635
#define DEC_637 636
#define DEC_638 637
#define DEC_639 638
#define DEC_640 639
#define DEC_641 640
#define DEC_642 641
#define DEC_643 642
#define DEC_644 643
#define DEC_645 644
#define DEC_646 645
#define DEC_647 646
#define DEC_648 647
#define DEC_649 648
#define DEC_650 649
#define DEC_651 650
#define DEC_652 651
#define DEC_653 652
#define DEC_654 653
#define DEC_655 654
#define DEC_656 655
#define DEC_657 656
#define DEC_658 657
#define DEC_659 658
#define DEC_660 659
#define DEC_661 660
#define DEC_662 661
#define DEC_663 662
#define DEC_664 663
#define DEC_665 664
#define DEC_666 665
#define DEC_667 666
#define DEC_668 667
#define DEC_669 668
#define DEC_670 669
#define DEC_671 670
#define DEC_672 671
#define DEC_673 672
#define DEC_674 673
#define DEC_675 674
#define DEC_676 675
#define DEC_677 676
#define DEC_678 677
#define DEC_679 678
#define DEC_680 679
#define DEC_681 680
#define DEC_682 681
#define DEC_683 682
#define DEC_684 683
#define DEC_685 684
#define DEC_686 685
#define DEC_687 686
#define DEC_688 687
#define DEC_689 688
#define DEC_690 689
#define DEC_691 690
#define DEC_692 691
#define DEC_693 692
#define DEC_694 693
#define DEC_695 694
#define DEC_696 695
#define DEC_697 696
#define DEC_698 697
#define DEC_699 698
#define DEC_700 699
#define DEC_701 700
#define DEC_702 701
#define DEC_703 702
#define DEC_704 703
#define DEC_705 704
#define DEC_706 705
#define DEC_707 706
#define DEC_708 707
#define DEC_709 708
#define DEC_710 709
#define DEC_711 710
#define DEC_712 711
#define DEC_713 712
#define DEC_714 713
#define DEC_715 714
#define DEC_716 715
#define DEC_717 716
#define DEC_718 717
#define DEC_719 718
#define DEC_720 719
#define DEC_721 720
#define DEC_722 721
#define DEC_723 722
#define DEC_724 723
#define DEC_725 724
#define DEC_726 725
#define DEC_727 726
#define DEC_728 727
#define DEC_729 728
#define DEC_730 729
#define DEC_731 730
#define DEC_732 731
#define DEC_733 732
#define DEC_734 733
#define DEC_735 734
#define DEC_736 735
#define DEC_737 736
#define DEC_738 737
#define DEC_739 738
#define DEC_740 739
#define DEC_741 740
#define DEC_742 741
#define DEC_743 742
#define DEC_744 743
#define DEC_745 744
#define DEC_746 745
#define DEC_747 746
#define DEC_748 747
#define DEC_749 748
#define DEC_750 749
#define DEC_751 750
#define DEC_752 751
#define DEC_753 752
#define DEC_754 753
#define DEC_755 754
#define DEC_756 755
#define DEC_757 756
#define DEC_758 757
#define DEC_759 758
#define DEC_760 759
#define DEC_761 760
#define DEC_762 761
#define DEC_763 762
#define DEC_764 763
#define DEC_765 764
#define DEC_766 765
#define DEC_767 766
#define DEC_768 767
#define DEC_769 768
#define DEC_770 769
#define DEC_771 770
#define DEC_772 771
#define DEC_773 772
#define DEC_774 773
#define DEC_775 774
#define DEC_776 775
#define DEC_777 776
#define DEC_778 777
#define DEC_779 778
#define DEC_780 779
#define DEC_781 780
#define DEC_782 781
#define DEC_783 782
#define DEC_784 783
#define DEC_785 784
#define DEC_786 785
#define DEC_787 786
#define DEC_788 787
#define DEC_789 788
#define DEC_790 789
#define DEC_791 790
#define DEC_792 791
#define DEC_793 792
#define DEC_794 793
#define DEC_795 794
#define DEC_796 795
#define DEC_797 796
#define DEC_798 797
#define DEC_799 798
#define DEC_800 799
#define DEC_801 800
#define DEC_802 801
#define DEC_803 802
#define DEC_804 803
#define DEC_805 804
#define DEC_806 805
#define DEC_807 806
#define DEC_808 807
#define DEC_809 808
#define DEC_810 809
#define DEC_811 810
#define DEC_812 811
#define DEC_813 812
#define DEC_814 813
#define DEC_815 814
#define DEC_816 815
#define DEC_817 816
#define DEC_818 817
#define DEC_819 818
#define DEC_820 819
#define DEC_821 820
#define DEC_822 821
#define DEC_823 822
#define DEC_824 823
#define DEC_825 824
#define DEC_826 825
#define DEC_827 826
#define DEC_828 827
#define DEC_829 828
#define DEC_830 829
#define DEC_831 830
#define DEC_832 831
#define DEC_833 832
#define DEC_834 833
#define DEC_835 834
#define DEC_836 835
#define DEC_837 836
#define DEC_838 837
#define DEC_839 838
#define DEC_840 839
#define DEC_841 840
#define DEC_842 841
#define DEC_843 842
#define DEC_844 843
#define DEC_845 844
#define DEC_846 845
#define DEC_847 846
#define DEC_848 847
#define DEC_849 848
#define DEC_850 849
#define DEC_851 850
#define DEC_852 851
#define DEC_853 852
#define DEC_854 853
#define DEC_855 854
#define DEC_856 855
#define DEC_857 856
#define DEC_858 857
#define DEC_859 858
#define DEC_860 859
#define DEC_861 860
#define DEC_862 861
#define DEC_863 862
#define DEC_864 863
#define DEC_865 864
#define DEC_866 865
#define DEC_867 866
#define DEC_868 867
#define DEC_869 868
#define DEC_870 869
#define DEC_871 870
#define DEC_872 871
#define DEC_873 872
#define DEC_874 873
#define DEC_875 874
#define DEC_876 875
#define DEC_877 876
#define DEC_878 877
#define DEC_879 878
#define DEC_880 879
#define DEC_881 880
#define DEC_882 881
#define DEC_883 882
#define DEC_884 883
#define DEC_885 884
#define DEC_886 885
#define DEC_887 886
#define DEC_888 887
#define DEC_889 888
#define DEC_890 889
#define DEC_891 890
#define DEC_892 891
#define DEC_893 892
#define DEC_894 893
#define DEC_895 894
#define DEC_896 895
#define DEC_897 896
#define DEC_898 897
#define DEC_899 898
#define DEC_900 899
#define DEC_901 900
#define DEC_902 901
#define DEC_903 902
#define DEC_904 903
#define DEC_905 904
#define DEC_906 905
#define DEC_907 906
#define DEC_908 907
#define DEC_909 908
#define DEC_910 909
#define DEC_911 910
#define DEC_912 911
#define DEC_913 912
#define DEC_914 913
#define DEC_915 914
#define DEC_916 915
#define DEC_917 916
#define DEC_918 917
#define DEC_919 918
#define DEC_920 919
#define DEC_921 920
#define DEC_922 921
#define DEC_923 922
#define DEC_924 923
#define DEC_925 924
#define DEC_926 925
#define DEC_927 926
#define DEC_928 927
#define DEC_929 928
#define DEC_930 929
#define DEC_931 930
#define DEC_932 931
#define DEC_933 932
#define DEC_934 933
#define DEC_935 934
#define DEC_936 935
#define DEC_937 936
#define DEC_938 937
#define DEC_939 938
#define DEC_940 939
#define DEC_941 940
#define DEC_942 941
#define DEC_943 942
#define DEC_944 943
#define DEC_945 944
#define DEC_946 945
#define DEC_947 946
#define DEC_948 947
#define DEC_949 948
#define DEC_950 949
#define DEC_951 950
#define DEC_952 951
#define DEC_953 952
#define DEC_954 953
#define DEC_955 954
#define DEC_956 955
#define DEC_957 956
#define DEC_958 957
#define DEC_959 958
#define DEC_960 959
#define DEC_961 960
#define DEC_962 961
#define DEC_963 962
#define DEC_964 963
#define DEC_965 964
#define DEC_966 965
#define DEC_967 966
#define DEC_968 967
#define DEC_969 968
#define DEC_970 969
#define DEC_971 970
#define DEC_972 971
#define DEC_973 972
#define DEC_974 973
#define DEC_975 974
#define DEC_976 975
#define DEC_977 976
#define DEC_978 977
#define DEC_979 978
#define DEC_980 979
#define DEC_981 980
#define DEC_982 981
#define DEC_983 982
#define DEC_984 983
#define DEC_985 984
#define DEC_986 985
#define DEC_987 986
#define DEC_988 987
#define DEC_989 988
#define DEC_990 989
#define DEC_991 990
#define DEC_992 991
#define DEC_993 992
#define DEC_994 993
#define DEC_995 994
#define DEC_996 995
#define DEC_997 996
#define DEC_998 997
#define DEC_999 998
#define DEC_1000 999



#define CHECK_N(x, n, ...) n
#define CHECK(...) CHECK_N(__VA_ARGS__, 0,)
#define PROBE(x) x, 1,

#define IS_PAREN(x) CHECK(IS_PAREN_PROBE x)
#define IS_PAREN_PROBE(...) PROBE(~)


#define CAT(a, ...) PRIMITIVE_CAT(a, __VA_ARGS__)
#define PRIMITIVE_CAT(a, ...) a ## __VA_ARGS__
//So now we can write the  IIF  macro(its called  IIF  right now, later we will show how to define a more generalized way of defining an  IF  macro):

#define IIF(c) PRIMITIVE_CAT(IIF_, c)
#define IIF_0(t, ...) __VA_ARGS__
#define IIF_1(t, ...) t
#define COMPL(b) PRIMITIVE_CAT(COMPL_, b)
#define COMPL_0 1
#define COMPL_1 0

#define REPEAT(count, macro, ...) \
    WHEN(count) \
    ( \
        OBSTRUCT(REPEAT_INDIRECT) () \
        ( \
            DEC(count), macro, __VA_ARGS__ \
        ) \
        OBSTRUCT(macro) \
        ( \
            DEC(count), __VA_ARGS__ \
        ) \
    )
#define REPEAT_INDIRECT() REPEAT


#define NOT(x) CHECK(PRIMITIVE_CAT(NOT_, x))
#define NOT_0 PROBE(~)
//Next we use the  COMPL  macro that we wrote to inverse this result, and then call  IIF :

#define BOOL(x) COMPL(NOT(x))
#define _IF(c) IIF(BOOL(c))
//We can also create a  WHEN  macro, that only expands whats next, if the condition is true, otherwise it will expand to nothing:

#define EAT(...)
#define EXPAND(...) __VA_ARGS__
#define WHEN(c) _IF(c)(EXPAND, EAT)

#define EMPTY()
#define DEFER(id) id EMPTY()
#define OBSTRUCT(...) __VA_ARGS__ DEFER(EMPTY)()
#define EXPAND(...) __VA_ARGS__

/*
#define EVAL(...)  EVAL1(EVAL1(EVAL1(__VA_ARGS__)))
#define EVAL1(...) EVAL2(EVAL2(EVAL2(__VA_ARGS__)))
#define EVAL2(...) EVAL3(EVAL3(EVAL3(__VA_ARGS__)))
#define EVAL3(...) EVAL4(EVAL4(EVAL4(__VA_ARGS__)))
#define EVAL4(...) EVAL5(EVAL5(EVAL5(__VA_ARGS__)))
#define EVAL5(...) __VA_ARGS__
*/
// http://jhnet.co.uk/articles/cpp_magic -----------------
#define FIRST(a, ...) a
#define SECOND(a, b, ...) b

#define EMPTY()

#define EVAL(...) EVAL1024(__VA_ARGS__)
#define EVAL1024(...) EVAL512(EVAL512(__VA_ARGS__))
#define EVAL512(...) EVAL256(EVAL256(__VA_ARGS__))
#define EVAL256(...) EVAL128(EVAL128(__VA_ARGS__))
#define EVAL128(...) EVAL64(EVAL64(__VA_ARGS__))
#define EVAL64(...) EVAL32(EVAL32(__VA_ARGS__))
#define EVAL32(...) EVAL16(EVAL16(__VA_ARGS__))
#define EVAL16(...) EVAL8(EVAL8(__VA_ARGS__))
#define EVAL8(...) EVAL4(EVAL4(__VA_ARGS__))
#define EVAL4(...) EVAL2(EVAL2(__VA_ARGS__))
#define EVAL2(...) EVAL1(EVAL1(__VA_ARGS__))
#define EVAL1(...) __VA_ARGS__

#define DEFER1(m) m EMPTY()
#define DEFER2(m) m EMPTY EMPTY()()
#define DEFER3(m) m EMPTY EMPTY EMPTY()()()
#define DEFER4(m) m EMPTY EMPTY EMPTY EMPTY()()()()

#define IS_PROBE(...) SECOND(__VA_ARGS__, 0)
#define PROBE() ~, 1

#define CAT_(a,b) a ## b

#define NOT(x) IS_PROBE(CAT_(_NOT_, x))
#define _NOT_0 PROBE()

#define BOOL(x) NOT(NOT(x))

#define IF_ELSE(condition) _IF_ELSE(BOOL(condition))
#define _IF_ELSE(condition) CAT_(_IF_, condition)

#define _IF_1(...) __VA_ARGS__ _IF_1_ELSE
#define _IF_0(...)             _IF_0_ELSE

#define _IF_1_ELSE(...)
#define _IF_0_ELSE(...) __VA_ARGS__

#define HAS_ARGS(...) BOOL(FIRST(_END_OF_ARGUMENTS_ __VA_ARGS__)())
#define HAS_1ARG(...) BOOL(SECOND(_END_OF_ARGUMENTS_ __VA_ARGS__)())

#define _END_OF_ARGUMENTS_() 0

#define MAP(m, first, ...)           \
  m(first)                           \
  IF_ELSE(HAS_ARGS(__VA_ARGS__))(    \
    DEFER2(_MAP)()(m, __VA_ARGS__)   \
  )(                                 \
    /* Do nothing, just terminate */ \
  )
#define MAP_PLUS2(a,b,m, first, ...)           \
  m(a,b,first)                           \
  IF_ELSE(HAS_ARGS(__VA_ARGS__))(    \
    DEFER2(_MAP_PLUS2)()(a,b,m, __VA_ARGS__)   \
  )(                                 \
    /* Do nothing, just terminate */ \
  )

#define MAP_PLUS1(a,m, first, ...)           \
  m(a,first)                           \
  IF_ELSE(HAS_ARGS(__VA_ARGS__))(    \
    DEFER2(_MAP_PLUS1)()(a,m, __VA_ARGS__)   \
  )(                                 \
    /* Do nothing, just terminate */ \
  )
#define MAP_ALT_PLUS1(a,m,n, first, ...)           \
	IF_ELSE(HAS_ARGS(__VA_ARGS__)) (m(a,first))(n(a,first)) \
	IF_ELSE(HAS_ARGS(__VA_ARGS__))(    \
    DEFER2(_MAP_ALT_PLUS1)()(a,m, n, __VA_ARGS__)   \
  )(                                 \
    /* Do nothing, just terminate */ \
  )
#define _MAP() MAP
#define _MAP_PLUS1() MAP_PLUS1
#define _MAP_ALT_PLUS1() MAP_ALT_PLUS1
#define _MAP_PLUS2() MAP_PLUS2

#define MACRO_END(m, n, first,__VA_ARGS__) \
IF_ELSE(HAS_ARGS(__VA_ARGS__))\
	(n(first)) \
	(m(first))


#define MAP2(m, n, first, ...)           \
  IF_ELSE(HAS_ARGS(__VA_ARGS__))(                         \
		m(first))(\
		n(first))\
  IF_ELSE(HAS_ARGS(__VA_ARGS__))(    \
    DEFER2(_MAP2)()(m, n,__VA_ARGS__)   \
  )(                                 \
    /* Do nothing, just terminate */ \
  )

#define _MAP2() MAP2


#define GREET(x) Hello, x!
#define BYE(x) Bye, x!

// ---------------------------------EVAL(MAP(GREET, Mum, Dad, Adam, Joe))
#define REPEAT(count, macro, ...) \
    WHEN(count) \
    ( \
        OBSTRUCT(REPEAT_INDIRECT) () \
        ( \
            DEC(count), macro, __VA_ARGS__ \
        ) \
        OBSTRUCT(macro) \
        ( \
            DEC(count), __VA_ARGS__ \
        ) \
    )
#define REPEAT_INDIRECT() REPEAT

//An example of using this macro
#define M(i, n, _) n,

#define valcomma(i, n, _) n,
//EVAL(REPEAT(10, M, 10,~)) // 0 1 2 3 4 5 6 7
//#define INIT_LIST(N,P) EVAL(REPEAT(P-1, valcomma, N,~)) N

#define INIT_LIST(N,P) EVAL(REPEAT(DEC(P), valcomma, N,~)) N

#define SQR(a) a * a

//#define LIST(...) __VA_ARGS__


//INIT_LIST(25,2)
